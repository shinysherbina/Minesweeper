<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minesweeper</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
    <!-- Stylesheet relative to public folder -->
    <link rel="stylesheet" href="style/styles.css"/>
</head>
<body>

    <nav class="navbar bg-body-tertiary heading">
        <div class="container-fluid">
            <h1 >Minesweeper</h1>
        </div>
    </nav>
        
    <div class="container">


        <!-- Game Over and Game won Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <!-- Value passed from Javascript as the same modal is being used for Game Over and Game won -->
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">View Board</button>
                <form action = "/" method = "GET">
                    <button type="submit" class="btn btn-warning" name="new-game" >New Game</button>
                </form>
                </div>
            </div>
            </div>
        </div>







        <% if (locals.res){ %>   <!--if result is available-->
            <% var res = JSON.parse (res) %>
            <% var mineArray = [] %>
            <h2>Mines<img src="images/mine.png"> : <span class = "totalMines"><%= res.mines %></span> </h2>  <!--Total number of mines -->
                                      
            <!-- Making minesweeper grid -->
            <!----------------------------->
            <div class ="mine-field">
            <% for (var i=0; i <res.height ; i++){ %>   
                <% for (var j=0; j<res.width ; j++) {%>
                    <div type ="button" class = "box " id = <%= "i"+i +"j"+j %> oncontextmenu="event.preventDefault();" >
                        <%= res.board[i][j] %>
                    </div>
                <% } %>
                <br>  <!-- Next row -->
            <% } %>   
            </div>

        <% } %>   <!--end if result is available-->

    </div>



    <!--      jquery          -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!--      Javascript      -->
    <!-------------------------->
    <%- include("./partials/javaScript.ejs") %>
</body>
<footer>
    ©️ Shiny Sherbina
</footer>
</html>